---
import type { Props } from "@astrojs/starlight/props";
import FooterComponent from "../FooterComponent.tsx";

const normalPages = Astro.props.sidebar
  .filter((item) => item.type === "link")
  .map((item) => item.href);

const links: { title: string; href: string }[] = [];

Astro.props.sidebar.forEach((item) => {
  if (item.type === "link") {
    links.push({
      title: item.label,
      href: item.href,
    });
    return;
  }

  if (item.type !== "group" || item.entries.length === 0) return;

  const firstLink = item.entries.find((e) => e.type === "link");
  if (!firstLink) return;

  if (item.badge?.text !== "Call to Action") {
    links.push({
      title: item.label,
      href: firstLink.href,
    });
  }
});
---

<FooterComponent links={links} />
